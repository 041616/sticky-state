!function(f){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=f();else if("function"==typeof define&&define.amd)define([],f);else{var g;g="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,g.StickyState=f()}}(function(){var define;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module){function getSrollPosition(){return window.scrollY||window.pageYOffset||0}function getAbsolutBoundingRect(el){var rect=el.getBoundingClientRect(),top=rect.top+getSrollPosition();return{top:top,bottom:top+rect.height,height:rect.height,width:rect.width}}function addBounds(rect1,rect2){var rect=assign({},rect1);return rect.top-=rect2.top,rect.bottom=rect.top+rect1.height,rect}function getPreviousElementSibling(el){var prev=el.previousElementSibling;return prev&&"script"===prev.tagName.toLocaleLowerCase()&&(prev=getPreviousElementSibling(prev)),prev}var assign=require("object-assign"),FastScroll=require("fastscroll"),_globals={featureTested:!1},defaults={disabled:!1,className:"sticky",fixedClass:"sticky-fixed",stateClassName:"is-sticky"},StickyState=function(element,options){if(!element)throw new Error("StickyState needs a DomElement");this.el=element,this.options=assign({},defaults,options),this.state={sticky:!1,fixedOffset:{top:0,bottom:0},bounds:{top:null,bottom:null,height:null,width:null},restrict:{top:null,bottom:null,height:null,width:null},style:{top:null,bottom:null},disabled:!1},this.child=this.el,this.scrollTarget=StickyState["native"]()?"auto"!==window.getComputedStyle(this.el.parentNode).overflow?window:this.el.parentNode:window,this.hasOwnScrollTarget=this.scrollTarget!==window,this.firstRender=!0,this.hasFeature=null,this.scrollHandler=null,this.resizeHandler=null,this.fastScroll=null,this.wrapper=null,this.render=this.render.bind(this),this.addSrollHandler(),this.addResizeHandler(),this.render()};StickyState.prototype.setState=function(state,silent){silent=silent===!0,this.state=assign({},this.state,state),silent||this.render()},StickyState.prototype.getPositionStyle=function(){var obj={top:null,bottom:null};for(var key in obj){var value=parseInt(window.getComputedStyle(this.el)[key]);value=isNaN(value)?null:value,obj[key]=value}return obj},StickyState.prototype.getBoundingClientRect=function(){return this.el.getBoundingClientRect()},StickyState.prototype.getBounds=function(){var style=this.getPositionStyle(),currentBounds={style:this.state.style,bounds:this.state.bounds,restrict:this.state.restrict};if(currentBounds.style.top===style.top&&currentBounds.style.bottom===style.bottom&&this.getBoundingClientRect().height===currentBounds.bounds.height)return currentBounds;var rect,restrict;if(this.canSticky()){var elem=getPreviousElementSibling(this.child),offset=0;elem?(offset=parseInt(window.getComputedStyle(elem)["margin-bottom"]),offset=offset||0,rect=getAbsolutBoundingRect(elem),this.hasOwnScrollTarget&&(rect=addBounds(rect,getAbsolutBoundingRect(this.scrollTarget))),rect.top=rect.bottom+offset):(elem=this.child.parentNode,offset=parseInt(window.getComputedStyle(elem)["padding-top"]),offset=offset||0,rect=getAbsolutBoundingRect(elem),this.hasOwnScrollTarget&&(rect=addBounds(rect,getAbsolutBoundingRect(this.scrollTarget))),rect.top=rect.top+offset),rect.height=this.child.clientHeight,rect.width=this.child.clientWidth,rect.bottom=rect.top+rect.height}else if(rect=getAbsolutBoundingRect(this.child),this.hasOwnScrollTarget){var parentRect=getAbsolutBoundingRect(this.scrollTarget);this.state.fixedOffset.top=parentRect.top,this.state.fixedOffset.bottom=parentRect.bottom,rect=addBounds(rect,parentRect),restrict=assign({},rect)}return restrict=restrict||getAbsolutBoundingRect(this.child.parentNode),{style:style,bounds:rect,restrict:restrict}},StickyState.prototype.updateBounds=function(silent){silent=silent===!0,this.setState(this.getBounds(),silent)},StickyState.prototype.canSticky=function(){return null!==this.hasFeature?this.hasFeature:this.hasFeature=window.getComputedStyle(this.el).position.match("sticky")},StickyState.prototype.addSrollHandler=function(){if(!this.scrollHandler){var hasScrollTarget=FastScroll.hasScrollTarget(this.scrollTarget);this.fastScroll=new FastScroll(this.scrollTarget),this.scrollHandler=this.updateStickyState.bind(this),this.fastScroll.on("scroll:start",this.scrollHandler),this.fastScroll.on("scroll:progress",this.scrollHandler),this.fastScroll.on("scroll:stop",this.scrollHandler),hasScrollTarget&&this.fastScroll.scrollY>0&&this.fastScroll.trigger("scroll:progress")}},StickyState.prototype.removeSrollHandler=function(){this.fastScroll&&(this.fastScroll.off("scroll:start",this.scrollHandler),this.fastScroll.off("scroll:progress",this.scrollHandler),this.fastScroll.off("scroll:stop",this.scrollHandler),this.fastScroll.destroy(),this.scrollHandler=null,this.fastScroll=null)},StickyState.prototype.addResizeHandler=function(){this.resizeHandler||(this.resizeHandler=this.onResize.bind(this),window.addEventListener("resize",this.resizeHandler,!1),window.addEventListener("orientationchange",this.resizeHandler,!1))},StickyState.prototype.removeResizeHandler=function(){this.resizeHandler&&(window.removeEventListener("resize",this.resizeHandler),window.removeEventListener("orientationchange",this.resizeHandler),this.resizeHandler=null)},StickyState.prototype.onResize=function(){this.updateBounds(!0),this.updateStickyState(!1)},StickyState.prototype.getStickyState=function(){var offsetBottom,scrollY=(this.child,this.fastScroll.scrollY),top=this.state.style.top,sticky=this.state.sticky;if(null!==top)return offsetBottom=this.state.restrict.bottom-this.state.bounds.height-top,top=this.state.bounds.top-top,this.state.sticky===!1&&scrollY>=top&&offsetBottom>=scrollY?sticky=!0:this.state.sticky&&(top>scrollY||scrollY>offsetBottom)&&(sticky=!1),sticky;scrollY+=window.innerHeight;var bottom=this.state.style.bottom;return null!==bottom&&(offsetBottom=this.state.restrict.top+this.state.bounds.height-bottom,bottom=this.state.bounds.bottom+bottom,this.state.sticky===!1&&bottom>=scrollY&&scrollY>=offsetBottom?sticky=!0:this.state.sticky&&(scrollY>bottom||offsetBottom>scrollY)&&(sticky=!1)),sticky},StickyState.prototype.updateStickyState=function(silent){var sticky=this.getStickyState();if(sticky!==this.state.sticky){silent=silent===!0;var state=this.getBounds();state.sticky=sticky,this.setState(state,silent)}},StickyState.prototype.render=function(){if(this.firstRender){if(this.firstRender=!1,!this.canSticky()){this.wrapper=document.createElement("div"),this.wrapper.className="sticky-wrap";var parent=this.el.parentNode;parent&&parent.insertBefore(this.wrapper,this.el),this.wrapper.appendChild(this.el),this.el.className+=" sticky-fixed",this.child=this.wrapper}this.updateBounds(!0),this.updateStickyState(!0)}if(!this.canSticky()){var height=this.state.disabled||!this.state.sticky||null===this.state.bounds.height?"auto":this.state.bounds.height+"px";this.wrapper.style.height=height}var className=this.el.className,hasStateClass=className.indexOf(this.options.stateClassName)>-1;return this.state.sticky&&!hasStateClass?className=className+" "+this.options.stateClassName:!this.state.sticky&&hasStateClass&&(className=className.split(this.options.stateClassName).join("")),this.el.className!==className&&(this.el.className=className),this.el},StickyState["native"]=function(){if(_globals.featureTested)return _globals.canSticky;if("undefined"!=typeof window){if(_globals.featureTested=!0,window.Modernizr&&window.Modernizr.hasOwnProperty("csspositionsticky"))return _globals.canSticky=window.Modernizr.csspositionsticky;var testEl=document.createElement("div");document.documentElement.appendChild(testEl);var prefixedSticky=["sticky","-webkit-sticky","-moz-sticky","-ms-sticky","-o-sticky"];_globals.canSticky=!1;for(var i=0;i<prefixedSticky.length&&(testEl.style.position=prefixedSticky[i],_globals.canSticky=!!window.getComputedStyle(testEl).position.match("sticky"),!_globals.canSticky);i++);document.documentElement.removeChild(testEl)}return _globals.canSticky},StickyState.apply=function(elements){if(elements)if(elements.length)for(var i=0;i<elements.length;i++)new StickyState(elements[i]);else new StickyState(elements)},module.exports=StickyState},{fastscroll:4,"object-assign":5}],2:[function(require,module){!function(exports){"use strict";var delegate=function(target,handler){var args=[].slice.call(arguments,2),fn=function(){return handler.apply(target,args)};return fn};"undefined"!=typeof module&&module.exports?module.exports=delegate:"undefined"!=typeof define?define(function(){return delegate}):exports.delegate=delegate}(this)},{}],3:[function(require,module){"use strict";Array.prototype.indexOf||(Array.prototype.indexOf=function(obj,start){for(var i=start||0,j=this.length;j>i;i++)if(this[i]===obj)return i;return-1});var EventDispatcher=function(){this._eventMap={},this._destroyed=!1};EventDispatcher.prototype={addListener:function(event,listener){return this.getListener(event)||(this._eventMap[event]=[]),-1==this.getListener(event).indexOf(listener)&&this._eventMap[event].push(listener),this},addListenerOnce:function(event,listener){var s=this,f2=function(){return s.removeListener(event,f2),listener.apply(this,arguments)};return this.addListener(event,f2)},removeListener:function(event,listener){var listeners=this.getListener(event);if(listeners){var i=listeners.indexOf(listener);i>-1&&(this._eventMap[event]=listeners.splice(i,1),0===listeners.length&&delete this._eventMap[event])}return this},removeAllListener:function(event){var listeners=this.getListener(event);return listeners&&(this._eventMap[event].length=0,delete this._eventMap[event]),this},dispatch:function(eventType,eventObject){var listeners=this.getListener(eventType);if(listeners){eventObject=eventObject?eventObject:{},eventObject.type=eventType,eventObject.target=eventObject.target||this;for(var i=-1;++i<listeners.length;)listeners[i].call(null,eventObject)}return this},getListener:function(event){if(this._destroyed)throw new Error("I am destroyed");return this._eventMap[event]},destroy:function(){if(this._eventMap){for(var i in this._eventMap)this.removeAllListener(i);this._eventMap=null}this._destroyed=!0}},EventDispatcher.prototype.on=EventDispatcher.prototype.bind=EventDispatcher.prototype.addEventListener=EventDispatcher.prototype.addListener,EventDispatcher.prototype.off=EventDispatcher.prototype.unbind=EventDispatcher.prototype.removeEventListener=EventDispatcher.prototype.removeListener,EventDispatcher.prototype.once=EventDispatcher.prototype.one=EventDispatcher.prototype.addListenerOnce,EventDispatcher.prototype.trigger=EventDispatcher.prototype.dispatchEvent=EventDispatcher.prototype.dispatch,module.exports=EventDispatcher},{}],4:[function(require,module){"use strict";var delegate=require("delegatejs"),EventDispatcher=require("./eventdispatcher"),_instanceMap={},FastScroll=function(scrollTarget,options){return scrollTarget=scrollTarget||window,_instanceMap[scrollTarget]?_instanceMap[scrollTarget].instance:(_instanceMap[scrollTarget]={instance:this,listenerCount:0},this.options=options||{animationFrame:!0},this.scrollTarget=scrollTarget,this.init(),this)};FastScroll.___instanceMap=_instanceMap,FastScroll.getInstance=function(scrollTarget,options){return new FastScroll(scrollTarget,options)},FastScroll.hasScrollTarget=function(scrollTarget){return void 0!==_instanceMap[scrollTarget]},FastScroll.hasInstance=FastScroll.hasScrollTarget,FastScroll.UP="up",FastScroll.DOWN="down",FastScroll.NONE="none",FastScroll.LEFT="left",FastScroll.RIGHT="right",FastScroll.prototype={destroyed:!1,scrollY:0,scrollX:0,lastScrollY:0,lastScrollX:0,timeout:0,speedY:0,speedX:0,stopFrames:5,currentStopFrames:0,firstRender:!0,animationFrame:!0,lastEvent:{type:null,scrollY:0,scrollX:0},scrolling:!1,init:function(){this.dispatcher=new EventDispatcher,this.animationFrame=this.options.animationFrame,this.updateScrollPosition=this.scrollTarget===window?delegate(this,this.updateWindowScrollPosition):delegate(this,this.updateElementScrollPosition),this.updateScrollPosition(),this.trigger=this.dispatchEvent,this.lastEvent.scrollY=this.scrollY,this.lastEvent.scrollX=this.scrollX,this.onScrollDelegate=delegate(this,this.onScroll),this.onNextFrameDelegate=delegate(this,this.onNextFrame),this.scrollTarget.addEventListener("scroll",this.onScrollDelegate,!1)},destroy:function(){_instanceMap[this.scrollTarget].listenerCount<=0&&!this.destroyed&&(delete _instanceMap[this.scrollTarget],this.cancelNextFrame(),this.scrollTarget.removeEventListener("scroll",this.onScrollDelegate),this.dispatcher.off(),this.dispatcher=null,this.onScrollDelegate=null,this.updateScrollPosition=null,this.onNextFrameDelegate=null,this.scrollTarget=null,this.destroyed=!0)},getAttributes:function(){return{scrollY:this.scrollY,scrollX:this.scrollX,speedY:this.speedY,speedX:this.speedX,angle:0,directionY:0===this.speedY?FastScroll.NONE:this.speedY>0?FastScroll.UP:FastScroll.DOWN,directionX:0===this.speedX?FastScroll.NONE:this.speedX>0?FastScroll.RIGHT:FastScroll.LEFT}},updateWindowScrollPosition:function(){this.scrollY=this.scrollTarget.scrollY||this.scrollTarget.pageYOffset||0,this.scrollX=this.scrollTarget.scrollX||this.scrollTarget.pageXOffset||0},updateElementScrollPosition:function(){this.scrollY=this.scrollTarget.scrollTop,this.scrollX=this.scrollTarget.scrollLeft},onScroll:function(){if(this.updateScrollPosition(),this.currentStopFrames=0,this.firstRender&&(this.firstRender=!1,this.scrollY>1))return void this.dispatchEvent("scroll:progress");if(this.scrolling||(this.scrolling=!0,this.dispatchEvent("scroll:start"),this.animationFrame&&(this.nextFrameID=requestAnimationFrame(this.onNextFrameDelegate))),!this.animationFrame){clearTimeout(this.timeout),this.onNextFrame();var self=this;this.timeout=setTimeout(function(){self.onScrollStop()},100)}},onNextFrame:function(){if(!this.destroyed){if(this.animationFrame&&this.updateScrollPosition(),this.speedY=this.lastScrollY-this.scrollY,this.speedX=this.lastScrollX-this.scrollX,this.lastScrollY=this.scrollY,this.lastScrollX=this.scrollX,this.animationFrame&&0===this.speedY&&this.scrolling&&this.currentStopFrames++>this.stopFrames)return void this.onScrollStop();this.dispatchEvent("scroll:progress"),this.animationFrame&&(this.nextFrameID=requestAnimationFrame(this.onNextFrameDelegate))}},onScrollStop:function(){this.scrolling=!1,this.animationFrame&&(this.cancelNextFrame(),this.currentStopFrames=0),this.dispatchEvent("scroll:stop")},cancelNextFrame:function(){cancelAnimationFrame(this.nextFrameID)},dispatchEvent:function(type,eventObject){eventObject=eventObject||this.getAttributes(),(this.lastEvent.type!==type||this.lastEvent.scrollY!==eventObject.scrollY||this.lastEvent.scrollX!==eventObject.scrollX)&&(this.lastEvent={type:type,scrollY:eventObject.scrollY,scrollX:eventObject.scrollX},eventObject.fastScroll=this,eventObject.target=this.scrollTarget,this.dispatcher.dispatch(type,eventObject))},on:function(event,listener){return this.dispatcher.on(event,listener)?(_instanceMap[this.scrollTarget].listenerCount+=1,!0):!1},off:function(event,listener){return this.dispatcher.off(event,listener)?(_instanceMap[this.scrollTarget].listenerCount-=1,!0):!1}},module.exports=FastScroll},{"./eventdispatcher":3,delegatejs:2}],5:[function(require,module){"use strict";function toObject(val){if(null===val||void 0===val)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(val)}var hasOwnProperty=Object.prototype.hasOwnProperty,propIsEnumerable=Object.prototype.propertyIsEnumerable;module.exports=Object.assign||function(target){for(var from,symbols,to=toObject(target),s=1;s<arguments.length;s++){from=Object(arguments[s]);for(var key in from)hasOwnProperty.call(from,key)&&(to[key]=from[key]);if(Object.getOwnPropertySymbols){symbols=Object.getOwnPropertySymbols(from);for(var i=0;i<symbols.length;i++)propIsEnumerable.call(from,symbols[i])&&(to[symbols[i]]=from[symbols[i]])}}return to}},{}]},{},[1])(1)});